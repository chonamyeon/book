import fs from 'fs';

const filePath = './src/data/celebrities.js';
let content = fs.readFileSync(filePath, 'utf8');

// Each book's unique, correct review — identified by (title + author)
const reviews = {
    '사피엔스': `유발 하라리의 <사피엔스>를 읽으며 나는 우리가 당연하게 여기는 거의 모든 것들이 실상 거대한 약속 위에 세워진 허구라는 사실에 온몸이 떨렸다. 내 지갑 속 종이쪽지가 커피 한 잔으로 바뀌는 이유, 수천 명이 한 깃발 아래 협력할 수 있는 이유가 모두 '상상의 질서' 덕분이라니. 하라리는 인류 지배의 핵심이 신화, 즉 공통된 허구에 있다고 말한다. 책을 덮고 창밖을 보며 나는 생각했다. 저 건물들과 법률, 자본주의라는 신화 속에서 나는 얼마나 주체적으로 생각하고 있는가?

농업 혁명을 인류 최대의 사기라고 단언하는 그의 시각은 도발적이지만 날카롭다. 수렵채집인보다 더 오래 일하고, 더 적은 영양을 섭취하면서도 문명이 번성했다는 역설은 현대의 우리에게도 유효한 질문을 던진다. 기술이 인류를 신의 단계로 이끌려는 지금, 정작 '인간이란 무엇인가'라는 물음은 소외되고 있다. 나는 이 책을 통해 세상을 보는 새로운 렌즈를 얻었다. 차가운 데이터의 눈이 아니라, 인류의 긴 여정을 굽어보며 앞으로 우리가 어떤 신화를 써야 할지 고민하는 성찰의 눈이다. 우리가 만들어가는 이야기가 세상을 바꾼다는 것, 그 무겁고도 경이로운 사실을 나는 이 책 한 권으로 비로소 이해할 수 있었다.`,

    '1984': `<1984>를 읽는 내내 소름 끼치는 현재성이 느껴졌다. 오웰이 70년 전 예견한 빅 브라더는 이제 강제적인 텔레스크린이 아니라, 우리가 스스로 주머니에 넣고 다니는 스마트폰 속에 살고 있다. 윈스턴 스미스가 일기장에 "빅 브라더를 타도하라"고 휘갈겼을 때의 공포와 해방감이 내 손끝까지 전달되는 것 같았다.

언어를 통제함으로써 사상 자체를 불가능하게 만드는 뉴스피크, 과거를 끊임없이 수정하여 진실을 지우는 시스템, 이것들이 단순한 소설적 상상인가? 알고리즘이 우리의 정보를 필터링하고 확증 편향을 부추기는 오늘날을 보면 오웰의 경고가 결코 과거의 이야기가 아님을 실감한다. '둘 더하기 둘은 넷'이라는 명백한 진실을 말하는 것조차 두렵게 만드는 사회. 윈스턴은 결국 굴복하여 빅 브라더를 사랑하게 됐지만, 나는 그가 끝까지 지키려 했던 그 순수한 사유의 불씨를 놓치지 않으려 한다. 자유란 결국 내가 믿는 것을 소리 내어 말할 수 있는 권리이며, 그 권리를 지키는 것이 가장 위대한 저항이다.`,

    '데미안': `<데미안>은 내게 책이 아니라 영혼의 부름이었다. 싱클레어가 밝은 세계의 안락함을 뒤로하고 어두운 세계의 진실을 마주했을 때, 나 또한 내가 애써 외면해왔던 내면의 갈망들을 똑바로 마주하게 되었다. "새는 알에서 나오려고 투쟁한다"는 문장은 단순한 성장의 은유가 아니었다. 우리가 진리라 믿었던 모든 기성 가치를 파괴해야만 '나'라는 실체에 도달할 수 있다는 처절한 선언이었다.

데미안이 카인의 표식을 다르게 해석해주었을 때, 강한 자와 약한 자의 구분이 얼마나 자의적인지 깨닫는 과정은 해방감 그 자체였다. 선과 악을 모두 품은 신 아브락사스를 향해 나아가는 여정은 이분법적 사고에 갇혀 있던 내 시야를 무한히 넓혀주었다. 나는 이제 남들이 정해놓은 평탄한 길보다, 험난하고 고독할지라도 나만의 목소리를 따라가는 길을 선택하려 한다. 내 안에서 걸어 나오는 그 사람, 바로 나 자신을 향한 여정은 이제 막 시작되었을 뿐이다.`,

    '채식주의자': `한강의 <채식주의자>는 내게 인간의 근원적인 폭력성에 대한 질문을 던졌다. 어느 날 갑자기 고기를 거부하며 식물이 되어가려 한 영혜의 선택은, 단순한 식습관의 변화가 아니라 우리 문명이 강요하는 모든 규범에 대한 조용한 절규였다. 영혜를 '미쳤다'고 단언하며 폭력을 행사하는 가족들의 모습에서 나는 '정상'이라는 이름 아래 얼마나 많은 타인의 영혼을 짓밟고 있는지 반성하게 되었다.

영혜가 베란다에서 물구나무를 서며 뿌리를 내리려 했을 때, 그 기괴하면서도 숭고한 이미지는 내 가슴에 깊은 파동을 남겼다. 타인을 해치지 않고는 존재할 수 없는 인간의 숙명, 그 피할 수 없는 폭력의 굴레에서 벗어나려는 영혜의 몸부림은 가장 극단적이면서도 가장 인간적인 저항이었다. 나는 이 책을 통해 내가 무심코 던진 말들이 누군가에게 날카로운 칼날이 될 수 있음을 배웠다. 이제 나는 누군가의 침묵 너머의 깊은 상처를 응시하며, 진정한 인간다움이 무엇인지 다시 써나가려 한다.`,

    '아몬드': `<아몬드>를 읽으며 나는 내 머릿속의 작은 아몬드를 가만히 만져보았다. 감정을 느끼지 못하는 윤재를 '괴물'이라고 부르는 세상이지만, 정작 타인의 고통을 화면 너머로 구경하며 아무런 통증을 느끼지 못하는 우리야말로 진짜 괴물이 아닐까 하는 생각이 들었다. 윤재와 곤이, 그리고 도라가 빚어내는 투박한 이해의 과정은 감정이란 학습이 아닌 '응시'에서 피어난다는 것을 보여준다.

곤이의 거친 행동 속에 숨겨진 사랑에 대한 갈망을 윤재가 그 무채색의 시선으로 있는 그대로 담아냈을 때, 나 또한 내 편견의 벽이 하나둘 허물어지는 것을 느꼈다. 사랑은 감정의 폭발이 아니라, 상대방의 슬픔을 함께 견디겠다는 고요한 의지의 산물이다. 윤재가 비로소 눈물을 흘렸을 때 나도 모르게 가슴이 뜨거워진 이유는, 그의 메말랐던 아몬드가 타인의 진심을 거름 삼아 싹을 틔웠기 때문이다. 우리는 모두 서로에게 조금 더 다가가기 위해 아파해야 하는 존재들이다.`,

    '팩트풀니스': `<팩트풀니스>는 세상을 향한 내 막연한 비관론을 시원하게 씻어주었다. 뉴스는 늘 전쟁과 기근만을 보도하지만, 한스 로슬링이 제시한 데이터는 침착하게 반박한다. "세상은 나아지고 있다, 하지만 동시에 나쁘기도 하다." 이 단순하면서도 강력한 문장은 균형 잡힌 시각의 중요성을 일깨워주었다.

내 뇌 속에 자리 잡은 '공포 본능'과 '직선 본능'이 얼마나 세상을 왜곡되게 보게 했는지 이 책을 통해 적나라하게 확인했다. 팩트를 직면한다는 것은 낙관주의에 빠지는 것이 아니라, 사실에 근거한 겸손함을 갖추는 일이다. 무지에서 오는 두려움은 우리를 마비시키지만, 정확한 정보는 행동하게 한다. 나는 이제 자극적인 헤드라인 너머에서 조용히 진행되는 점진적인 발전을 볼 줄 알게 되었다. 세상을 정확히 이해하려는 노력이야말로 더 나은 미래를 설계하기 위한 가장 기본적인 예의이자 용기라는 것을 이 책은 가르쳐주었다.`,

    '레버리지': `롭 무어의 <레버리지>는 내게 '성실함'이라는 이름 아래 스스로를 얼마나 소모해왔는지 깨닫게 했다. 아침부터 밤까지 쉴 새 없이 일하는 것이 성공의 유일한 길이라 믿었던 나에게 이 책은 차갑게 묻는다. "당신이 노동하는 시간만큼 당신의 가치가 오르고 있는가?"

내가 내 인생의 레버리저가 되지 않으면, 결국 누군가의 레버리지가 되어 그들의 꿈을 위해 소모될 뿐이라는 경고는 정신을 번쩍 들게 했다. 레버리지는 단순한 기술이 아니다. 낮은 가치의 일들을 덜어내고 오직 나만이 할 수 있는 일에 집중하겠다는 삶의 주권 선언이다. 못하는 일을 위임하는 것에 죄책감을 느끼지 않기로 했다. 서로의 강점을 활용하는 공생의 지름길이기 때문이다. 내 삶의 진정한 자유는 얼마나 바쁘게 움직였느냐가 아니라, 얼마나 큰 지렛대로 세상을 움직였느냐에 달려 있다.`,

    '원씽': `게리 켈러의 <원씽>을 읽으며 나는 책상을 가득 메운 해야 할 일 목록을 찢어버렸다. 멀티태스킹이 능력인 양 칭송받는 시대지만, 그것은 집중력을 잘게 쪼개어 효율을 갉아먹는 환상일 뿐이다. "당신이 할 수 있는 단 하나의 일, 그 일을 함으로써 다른 모든 일이 쉬워지거나 필요 없게 만드는 그 일은 무엇인가?"

이 질문은 혼란스러웠던 내 일상에 명확한 이정표를 세워주었다. 성공은 모든 것을 잘 해내는 덧셈의 결과가 아니라, 가장 중요한 하나를 남기고 나머지를 쳐내는 뺄셈의 미학이다. 나는 이제 매일 아침 내 인생의 첫 번째 도미노를 찾는다. 그 하나가 쓰러질 때 연쇄적으로 일어날 기적 같은 변화들을 상상하며 말이다. 복잡한 세상을 이기는 비결은 단순함 속에 숨겨져 있다. 내 삶의 모든 에너지를 단 하나의 초점으로 수렴시키는 훈련을 오늘도 나는 계속한다.`,

    '위버멘쉬': `니체의 위버멘쉬 개념은 내게 고통을 바라보는 새로운 감각을 심어주었다. 고통 없는 평화를 행복의 척도로 삼았던 나에게, 그는 "고통은 자아를 단련하는 용광로이며 시련을 겪지 않은 영혼은 결코 고귀해질 수 없다"고 일갈했다.

타인의 가치관을 짊어진 낙타의 삶에서 벗어나 기성 권위에 저항하는 사자가 되고, 마침내 어린아이처럼 순수한 창조의 유희를 누리는 위버멘쉬의 단계는 내가 도달하고 싶은 삶의 목표가 되었다. "아모르 파티(Amor Fati)", 나의 운명을 참아내는 것이 아니라 그 고난까지 사랑하겠다는 이 선언은 내 삶을 혁명적으로 바꾸어놓았다. 나는 이제 실패와 슬픔을 원망하지 않는다. 그것들은 어제의 나를 극복하고 더 높은 곳으로 오르기 위한 계단일 뿐이다. 매일 조금씩 나 자신을 넘어서는 것, 그것이 위버멘쉬의 길이다.`,

    '세이노의 가르침': `<세이노의 가르침>은 귀를 간지럽히는 달콤한 위로가 아니라, 나태한 영혼을 직격하는 차가운 각성제였다. "피보다 진한 눈물을 흘려본 적이 있는가?"라는 물음 앞에 나는 수많은 변명과 합리화로 도망쳤던 과거를 마주해야 했다.

가난은 환경의 문제이기 전에 의지의 문제이며, 실력을 쌓지 않고 운만 쫓는 태도는 결국 스스로를 파멸로 이끈다는 엄중한 경고는 뼛속까지 시리게 했다. 세이노의 언어는 거칠고 투박하지만 그 속에는 자본주의 정글에서 살아남기 위한 생존의 지혜가 날것 그대로 담겨 있다. 나는 이제 남들이 정한 기준에 당당히 "No"라고 말할 수 있는 힘을 기르기 위해 오늘 하루를 피 터지게 살아내기로 결심했다. 진정한 자립의 끝에는 누구에게도 휘둘리지 않는 자유가 기다리고 있다.`,

    '돈의 심리학': `모건 하우절의 <돈의 심리학>을 읽으며 나는 통장 잔고보다 마음의 비합리성을 먼저 들여다보게 되었다. 투자는 차가운 숫자가 아니라, 인간의 나약함과 탐욕, 공포가 빚어내는 뜨거운 심리전이었다. 왜 시장의 소음에 일희일비하고, 남들의 수익률에 조급해했는지 나는 비로소 이해할 수 있었다.

돈은 그 자체로 목적이 아니라, 하고 싶은 일을 원할 때 원하는 사람과 함께 할 수 있게 해주는 '자유'를 사기 위한 수단이다. 진정한 부의 축적은 높은 수익률보다 높은 저축률과 지치지 않는 기다림에서 온다는 진리가 깊이 박혔다. 복리의 마법은 기술이 아니라 인내의 열매다. 나는 이제 남들의 성공 방정식에 휘둘리지 않고 나만의 게임을 설계하며 내 속도에 맞춰 걷는다. 돈을 다루는 태도가 곧 내 삶을 다루는 태도임을 깨달은 순간, 나는 돈의 노예에서 주인으로 거듭날 수 있었다.`,

    '너의 이름은': `<너의 이름은>의 소설판은 내게 시공간을 초월한 인연의 끈 '무스비(結び)'의 신비로움을 선사했다. 타키와 미츠하가 서로의 이름을 잊지 않기 위해 손바닥에 필사적으로 문장을 새기던 그 장면은, 우리가 소중한 것들을 이름조차 불러보지 못하고 잊어가고 있다는 사실을 돌아보게 했다.

만남은 혜성의 궤도처럼 우연히 닥치지만, 그 관계를 이어가고 운명을 바꾸는 것은 간절함과 용기라는 인간의 의지다. 나는 두 주인공의 사랑 이야기에 감동한 것을 넘어, 엉킨 실타래를 풀고 잇듯 우리의 삶이 서로 어떻게 연결되어 있는지에 대한 작가의 따뜻한 시선에 마음이 갔다. 나는 이제 내가 만나는 모든 인연을 소중히 여기며, 비록 내일 다시 엇갈리더라도 서로의 가슴에 남긴 온기는 사라지지 않을 것임을 믿는다. 이름은 단순한 호칭이 아니라, 한 사람의 영혼을 불러일으키는 가장 강력한 주술이다.`,

    '돈의 속성': `김승호 회장의 <돈의 속성>을 읽으며 나는 돈을 '존중받아야 할 인격체'로 대하기 시작했다. 돈에게도 감정이 있고, 자신을 아끼는 사람 곁에 머물기를 좋아하며, 나쁜 목적으로 얻은 돈은 결국 주인을 해친다는 통찰은 내 경제적 가치관을 근본적으로 흔들었다.

부자가 되는 것보다 부를 유지하는 능력이 더 중요하다는 가르침은 내 조급함을 잠재워주었다. 성실하게 모은 종잣돈은 나를 지켜주는 단단한 나무가 되고, 그 나무들이 모여 숲을 이룰 때 경제적 자유라는 평온한 그늘이 생긴다. 나는 이제 돈을 쫓아 달려가는 사냥꾼이 아니라, 돈이 나를 좋아하도록 내 인격과 실력을 먼저 닦는 농부의 마음으로 살아간다. 정직하게 번 돈만이 내 영혼을 갉아먹지 않고 내 삶을 진정으로 풍요롭게 만든다는 것을 나는 확신한다.`,

    '스토너': `존 윌리엄스의 <스토너>는 내게 '조용한 존재의 위대함'을 보여주었다. 윌리엄 스토너의 삶은 겉으로 보기에 실패와 상처로 얼룩진 평범한 기록이다. 학문적 명성도 없었고, 가정은 불행했으며, 딸과의 관계도 어긋났다. 하지만 그는 자신이 사랑한 고전 문학의 길을, 믿는 정직한 교육자의 길을 묵묵하고 성실하게 걸어갔다.

세상은 화려한 성취와 드라마틱한 성공 신화를 강요하고, 그렇지 못한 삶을 낙오자로 규정한다. 하지만 스토너는 말한다. 인생이 계획대로 흐르지 않더라도, 그 고비마다 지켜온 나만의 성실함과 투명한 마음만으로도 한 생애는 충분히 고귀하다고. 나는 이제 타인의 평가에 휘둘리지 않고 내가 사랑하는 일을 묵묵히 해 나가는 스토너의 뒷모습을 나침반으로 삼는다. 보이지 않는 곳에서 빛나는 그 숭고한 평범함이 바로 도달해야 할 삶의 정수였다.`,

    '이처럼 사소한 것들': `클레어 키건의 <이처럼 사소한 것들>을 읽으며 나는 차가운 겨울밤, 빌 펄롱이 느꼈을 도덕적 갈등 속으로 완벽히 빨려 들어갔다. 자신의 안온한 가정과 평판을 지키기 위해 눈앞의 비극을 모른 척할 것인가, 아니면 모든 것을 걸고서라도 한 아이의 손을 잡을 것인가?

펄롱이 아이를 데치고 눈길을 걸어갈 때 느껴졌던 공포와 해방감은 내 가슴에 잊지 못할 파동을 남겼다. 우리는 평소 거창한 정의를 부르짖지만, 정작 작은 손해가 닥칠 때 그 정의는 너무나도 쉽게 무너진다. 펄롱은 위대한 영웅이 아니었다. 그저 사소한 양심을 버리지 못한 평범한 가장이었을 뿐이다. 하지만 그 사소한 정의가 마을의 두꺼운 침묵을 깨고 희망의 빛을 피웠다. 나는 이제 아주 작은 순간에도 타인에게 손을 내밀 수 있는 조용한 용기를 내 삶의 가장 소중한 자산으로 여기기로 했다.`
};

// Build a map from title → review
Object.entries(reviews).forEach(([title, review]) => {
    // Match by title field (both quoted types)
    const regex = new RegExp(
        `(title:\\s*["'\`]${title.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}["'\`][\\s\\S]*?review:\\s*\`)([\\s\\S]*?)(\`)`,
        'g'
    );
    let found = false;
    content = content.replace(regex, (match, p1, p2, p3) => {
        found = true;
        console.log(`✅ Updated: "${title}" (${review.length} chars)`);
        return p1 + review + p3;
    });
    if (!found) {
        // Book has no review field yet — insert one after 'desc' line
        const titleRegex = new RegExp(
            `(title:\\s*["'\`]${title.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}["'\`])`,
            'g'
        );
        content = content.replace(titleRegex, (match) => {
            console.log(`➕ Title matched, will need manual insert for: "${title}"`);
            return match;
        });
    }
});

// Special: for books without review field, add review after desc
// -- Find 1984 and insert review field if missing
const book1984Pattern = /(id:\s*"1984"[\s\S]*?desc:\s*"[^"]*")([\s\S]*?)(,\s*source:|,\s*price:|,\s*category:)/g;
if (!content.includes('id: "1984"')) {
    console.log('⚠️  1984 id not found — may use title match only');
} else {
    content = content.replace(book1984Pattern, (match, p1, p2, p3) => {
        if (!p2.includes('review:')) {
            console.log('➕ Injecting review field into 1984 entry');
            return p1 + `,\n                review: \`${reviews['1984']}\`` + p3;
        }
        return match;
    });
}

fs.writeFileSync(filePath, content, 'utf8');
console.log('\n🎉 All reviews updated correctly.');
